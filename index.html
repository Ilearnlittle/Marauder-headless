<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP32 Marauder Headless Controller</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>

<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-wifi"></i> ESP32 Marauder</h1>
            <div class="status-bar">
                <div class="status-item" id="wifi-mode">
                    <i class="fas fa-broadcast-tower"></i> <span>AP Mode: Marauder_AP</span>
                </div>
                <div class="status-item" id="battery">
                    <i class="fas fa-battery-three-quarters"></i> <span>Battery: 85%</span>
                </div>
                <div class="status-item" id="uptime">
                    <i class="fas fa-clock"></i> <span>Uptime: 00:00:00</span>
                </div>
                <div class="status-item" id="clients">
                    <i class="fas fa-users"></i> <span>Clients: 1</span>
                </div>
            </div>
        </header>

        <nav id="main-nav">
            <ul>
                <li class="nav-item active" data-target="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</li>
                <li class="nav-item" data-target="wifi-attacks"><i class="fas fa-bomb"></i> WiFi Attacks</li>
                <li class="nav-item" data-target="scanners"><i class="fas fa-search"></i> Scanners</li>
                <li class="nav-item" data-target="sniffers"><i class="fas fa-eye"></i> Sniffers</li>
                <li class="nav-item" data-target="captures"><i class="fas fa-file-download"></i> Captures</li>
                <li class="nav-item" data-target="settings"><i class="fas fa-cogs"></i> Settings</li>
            </ul>
        </nav>

        <main>
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <h2>Dashboard</h2>
                </div>
                <div class="dashboard-cards">
                    <div class="card">
                        <div class="card-header">
                            <h3>Device Info</h3>
                        </div>
                        <div class="card-body">
                            <p><strong>Model:</strong> ESP32 WROOM-32</p>
                            <p><strong>Flash Size:</strong> 4MB</p>
                            <p><strong>Firmware Version:</strong> Marauder v1.0</p>
                            <p><strong>MAC Address:</strong> <span id="mac-address">12:34:56:78:9A:BC</span></p>
                            <p><strong>Free Memory:</strong> <span id="free-memory">115,432 bytes</span></p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3>Network Status</h3>
                        </div>
                        <div class="card-body">
                            <p><strong>AP SSID:</strong> Marauder_AP</p>
                            <p><strong>IP Address:</strong> 192.168.4.1</p>
                            <p><strong>Connected Clients:</strong> <span id="client-count">1</span></p>
                            <p><strong>Channel:</strong> 1</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3>Quick Actions</h3>
                        </div>
                        <div class="card-body quick-actions">
                            <button id="scan-networks"><i class="fas fa-search"></i> Scan Networks</button>
                            <button id="toggle-bluetooth"><i class="fab fa-bluetooth"></i> Toggle BLE</button>
                            <button id="restart-device"><i class="fas fa-redo"></i> Restart Device</button>
                            <button id="update-firmware"><i class="fas fa-download"></i> Update Firmware</button>
                        </div>
                    </div>
                </div>
                <div class="log-container">
                    <div class="log-header">
                        <h3>System Log</h3>
                        <button id="clear-log">Clear</button>
                    </div>
                    <div class="log-content" id="system-log">
                        <div class="log-entry">[INFO] ESP32 Marauder started successfully</div>
                        <div class="log-entry">[INFO] Flash Size: 4MB (4,194,304 bytes)</div>
                        <div class="log-entry">[INFO] Available space for captures: ~2.5MB</div>
                        <div class="log-entry">[INFO] AP mode activated: SSID: Marauder_AP</div>
                        <div class="log-entry">[INFO] Web server started on port 80</div>
                        <div class="log-entry">[INFO] Client connected: 192.168.4.2</div>
                    </div>
                </div>
            </section>

            <!-- Other sections remain the same as in the previous code -->
            <!-- WiFi Attacks Section -->
            <section id="wifi-attacks" class="content-section">
                <!-- Content from previous code -->
            </section>

            <!-- Scanners Section -->
            <section id="scanners" class="content-section">
                <!-- Content from previous code -->
            </section>

            <!-- Sniffers Section -->
            <section id="sniffers" class="content-section">
                <!-- Content from previous code -->
            </section>

            <!-- Captures Section -->
            <section id="captures" class="content-section">
                <!-- Content from previous code -->
            </section>

            <!-- Settings Section -->
            <section id="settings" class="content-section">
                <div class="section-header">
                    <h2>Settings</h2>
                </div>
                <div class="settings-container">
                    <div class="settings-card">
                        <div class="settings-header">
                            <h3>Network Settings</h3>
                        </div>
                        <div class="settings-body">
                            <div class="settings-group">
                                <h4>Access Point Mode</h4>
                                <div class="input-group">
                                    <label for="ap-ssid">SSID:</label>
                                    <input type="text" id="ap-ssid" value="Marauder_AP">
                                </div>
                                <div class="input-group">
                                    <label for="ap-password">Password:</label>
                                    <input type="password" id="ap-password" value="marauder123">
                                </div>
                                <div class="input-group">
                                    <label for="ap-channel">Channel:</label>
                                    <input type="number" id="ap-channel" min="1" max="14" value="1">
                                </div>
                                <div class="input-group checkbox">
                                    <input type="checkbox" id="ap-hidden">
                                    <label for="ap-hidden">Hidden SSID</label>
                                </div>
                            </div>
                            <div class="settings-group">
                                <h4>Station Mode</h4>
                                <div class="input-group">
                                    <label for="station-ssid">Connect to SSID:</label>
                                    <input type="text" id="station-ssid" placeholder="Enter WiFi SSID">
                                </div>
                                <div class="input-group">
                                    <label for="station-password">Password:</label>
                                    <input type="password" id="station-password" placeholder="Enter WiFi password">
                                </div>
                                <button id="connect-wifi" class="primary"><i class="fas fa-plug"></i> Connect</button>
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="settings-header">
                            <h3>Web Interface Settings</h3>
                        </div>
                        <div class="settings-body">
                            <div class="input-group">
                                <label for="web-username">Username:</label>
                                <input type="text" id="web-username" value="admin">
                            </div>
                            <div class="input-group">
                                <label for="web-password">Password:</label>
                                <input type="password" id="web-password" value="marauder123">
                            </div>
                            <div class="input-group checkbox">
                                <input type="checkbox" id="dark-mode">
                                <label for="dark-mode">Dark Mode</label>
                            </div>
                            <div class="input-group">
                                <label for="log-level">Log Level:</label>
                                <select id="log-level">
                                    <option value="debug">Debug</option>
                                    <option value="info" selected>Info</option>
                                    <option value="warning">Warning</option>
                                    <option value="error">Error</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="refresh-rate">UI Refresh Rate (ms):</label>
                                <input type="number" id="refresh-rate" min="500" max="5000" step="100" value="1000">
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="settings-header">
                            <h3>System Settings</h3>
                        </div>
                        <div class="settings-body">
                            <div class="input-group">
                                <label for="device-name">Device Name:</label>
                                <input type="text" id="device-name" value="ESP32-Marauder">
                            </div>
                            <div class="settings-group">
                                <h4>Memory Management</h4>
                                <div class="memory-bar-container">
                                    <div class="memory-label">Flash Usage (4MB Total):</div>
                                    <div class="memory-bar">
                                        <div class="memory-segment firmware" style="width: 35%;">Firmware (1.4MB)</div>
                                        <div class="memory-segment spiffs" style="width: 25%;">SPIFFS (1.0MB)</div>
                                        <div class="memory-segment free" style="width: 40%;">Free (1.6MB)</div>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label for="max-capture-size">Max Capture Size (KB):</label>
                                    <input type="number" id="max-capture-size" min="100" max="1500" step="100" value="500">
                                </div>
                                <div class="input-group checkbox">
                                    <input type="checkbox" id="auto-delete-old">
                                    <label for="auto-delete-old">Auto-delete Oldest Files When Full</label>
                                </div>
                            </div>
                            <div class="settings-group">
                                <h4>Power Management</h4>
                                <div class="input-group checkbox">
                                    <input type="checkbox" id="power-save-mode">
                                    <label for="power-save-mode">Power Save Mode</label>
                                </div>
                                <div class="input-group">
                                    <label for="sleep-timeout">Sleep Timeout (minutes):</label>
                                    <input type="number" id="sleep-timeout" min="0" max="60" value="0">
                                    <span class="hint">0 = Disabled</span>
                                </div>
                            </div>
                            <div class="button-group">
                                <button id="save-settings" class="primary"><i class="fas fa-save"></i> Save Settings</button>
                                <button id="reset-settings"><i class="fas fa-undo"></i> Reset to Default</button>
                            </div>
                            <div class="button-group mt-20">
                                <button id="firmware-update" class="primary"><i class="fas fa-download"></i> Firmware Update</button>
                                <button id="factory-reset" class="danger"><i class="fas fa-exclamation-triangle"></i> Factory Reset</button>
                                <button id="restart-esp" class="warning"><i class="fas fa-power-off"></i> Restart Device</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <div class="modal" id="firmware-update-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Firmware Update</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="update-options">
                    <div class="option-group">
                        <h4>Update Method</h4>
                        <div class="radio-group">
                            <input type="radio" id="ota-update" name="update-method" checked>
                            <label for="ota-update">OTA Update (from URL)</label>
                        </div>
                        <div class="radio-group">
                            <input type="radio" id="file-update" name="update-method">
                            <label for="file-update">Upload Firmware File</label>
                        </div>
                    </div>

                    <div id="ota-update-form">
                        <div class="input-group">
                            <label for="firmware-url">Firmware URL:</label>
                            <input type="text" id="firmware-url" placeholder="https://example.com/firmware.bin">
                        </div>
                    </div>

                    <div id="file-update-form" class="hidden">
                        <div class="input-group file-upload">
                            <label for="firmware-file">Select Firmware File:</label>
                            <input type="file" id="firmware-file" accept=".bin">
                            <div class="file-name">No file selected</div>
                        </div>
                    </div>

                    <div class="warning-message">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Warning: Updating firmware may take several minutes. Do not power off the device during the update process.</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="cancel-update">Cancel</button>
                <button class="start-update primary">Start Update</button>
            </div>
        </div>
    </div>

    <div class="modal" id="confirm-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="confirm-title">Confirm Action</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirm-message">Are you sure you want to perform this action?</p>
            </div>
            <div class="modal-footer">
                <button class="cancel-action">Cancel</button>
                <button id="confirm-action" class="danger">Confirm</button>
            </div>
        </div>
    </div>

    <script type="module" src="./script.js"></script>
</body>

</html>